/*!
ICanHaz.js version 0.9 -- by @HenrikJoreteg
More info at: http://icanhazjs.com
*/
(function(){
/*!
  mustache.js -- Logic-less templates in JavaScript
  by @janl (MIT Licensed, https://github.com/janl/mustache.js/blob/master/LICENSE).
  See http://mustache.github.com/ for more info.
*/
var n=function(){var n=function(){};return n.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":!0},context:{},render:function(n,t,i,r){if(r||(this.context=t,this.buffer=[]),!this.includes("",n)){if(r)return n;this.send(n);return}n=this.render_pragmas(n);var u=this.render_section(n,t,i);if(r)return this.render_tags(u,t,i,r);this.render_tags(u,t,i,r)},send:function(n){n!=""&&this.buffer.push(n)},render_pragmas:function(n){if(!this.includes("%",n))return n;var t=this,i=new RegExp(this.otag+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+this.ctag);return n.replace(i,function(n,i,r){if(!t.pragmas_implemented[i])throw{message:"This implementation of mustache doesn't understand the '"+i+"' pragma"};if(t.pragmas[i]={},r){var u=r.split("=");t.pragmas[i][u[0]]=u[1]}return""})},render_partial:function(n,t,i){if(n=this.trim(n),!i||i[n]===undefined)throw{message:"unknown_partial '"+n+"'"};return typeof t[n]!="object"?this.render(i[n],t,i,!0):this.render(i[n],t[n],i,!0)},render_section:function(n,t,i){if(!this.includes("#",n)&&!this.includes("^",n))return n;var r=this,u=new RegExp(this.otag+"(\\^|\\#)\\s*(.+)\\s*"+this.ctag+"\n*([\\s\\S]+?)"+this.otag+"\\/\\s*\\2\\s*"+this.ctag+"\\s*","mg");return n.replace(u,function(n,u,f,e){var o=r.find(f,t);return u=="^"?!o||r.is_array(o)&&o.length===0?r.render(e,t,i,!0):"":u=="#"?r.is_array(o)?r.map(o,function(n){return r.render(e,r.create_context(n),i,!0)}).join(""):r.is_object(o)?r.render(e,r.create_context(o),i,!0):typeof o=="function"?o.call(t,e,function(n){return r.render(n,t,i,!0)}):o?r.render(e,t,i,!0):"":void 0})},render_tags:function(n,t,i,r){for(var u=this,o=function(){return new RegExp(u.otag+"(=|!|>|\\{|%)?([^\\/#\\^]+?)\\1?"+u.ctag+"+","g")},s=o(),h=function(n,r,f){switch(r){case"!":return"";case"=":return u.set_delimiters(f),s=o(),"";case">":return u.render_partial(f,t,i);case"{":return u.find(f,t);default:return u.escape(u.find(f,t))}},f=n.split("\n"),e=0;e<f.length;e++)f[e]=f[e].replace(s,h,this),r||this.send(f[e]);if(r)return f.join("\n")},set_delimiters:function(n){var t=n.split(" ");this.otag=this.escape_regex(t[0]);this.ctag=this.escape_regex(t[1])},escape_regex:function(n){if(!arguments.callee.sRE)arguments.callee.sRE=new RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","g");return n.replace(arguments.callee.sRE,"\\$1")},find:function(n,t){function r(n){return n===!1||n===0||n}n=this.trim(n);var i;return(r(t[n])?i=t[n]:r(this.context[n])&&(i=this.context[n]),typeof i=="function")?i.apply(t):i!==undefined?i:""},includes:function(n,t){return t.indexOf(this.otag+n)!=-1},escape:function(n){return n=String(n===null?"":n),n.replace(/&(?!\w+;)|["<>\\]/g,function(n){switch(n){case"&":return"&amp;";case"\\":return"\\\\";case'"':return'"';case"<":return"&lt;";case">":return"&gt;";default:return n}})},create_context:function(n){var t,i;return this.is_object(n)?n:(t=".",this.pragmas["IMPLICIT-ITERATOR"]&&(t=this.pragmas["IMPLICIT-ITERATOR"].iterator),i={},i[t]=n,i)},is_object:function(n){return n&&typeof n=="object"},is_array:function(n){return Object.prototype.toString.call(n)==="[object Array]"},trim:function(n){return n.replace(/^\s*|\s*$/g,"")},map:function(n,t){var r,u,i;if(typeof n.map=="function")return n.map(t);for(r=[],u=n.length,i=0;i<u;i++)r.push(t(n[i]));return r}},{name:"mustache.js",version:"0.3.0",to_html:function(t,i,r,u){var f=new n;return u&&(f.send=u),f.render(t,i,r),u?void 0:f.buffer.join("\n")}}}();
/*!
  ICanHaz.js -- by @HenrikJoreteg
*/
(function(){function i(n){return"".trim?n.trim():n.replace(/^\s+/,"").replace(/\s+$/,"")}var t={VERSION:"0.9",templates:{},$:typeof window!="undefined"?window.jQuery||window.Zepto||null:null,addTemplate:function(i,r){if(t[i])throw"Invalid name: "+i+".";if(t.templates[i])throw'Template " + name + " exists';t.templates[i]=r;t[i]=function(r,u){r=r||{};var f=n.to_html(t.templates[i],r,t.templates);return t.$&&!u?t.$(f):f}},clearAll:function(){for(var n in t.templates)delete t[n];t.templates={}},refresh:function(){t.clearAll();t.grabTemplates()},grabTemplates:function(){for(var f=document.getElementsByTagName("script"),e=f!==undefined?f.length:0,r,u=[],n=0;n<e;n++)r=f[n],r&&r.innerHTML&&r.id&&(r.type==="text/html"||r.type==="text/x-icanhaz")&&(t.addTemplate(r.id,i(r.innerHTML)),u.unshift(r));for(n=0,e=u.length;n<e;n++)u[n].parentNode.removeChild(u[n])}};typeof require!="undefined"?module.exports=t:window.ich=t;typeof document!="undefined"&&(t.$?t.$(function(){t.grabTemplates()}):document.addEventListener("DOMContentLoaded",function(){t.grabTemplates()},!1))})()})();
//# sourceMappingURL=ICanHaz.min.js.map
